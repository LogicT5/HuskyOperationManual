# Husky本体

## 外观

Husky 的外观如下所示，包括：

* 挤压铝安装导轨
* 用户有效载荷区，包括用户电源面板
* 前后保险杠
* 电池舱
* 状态面板
* 电源按钮
* 运动停止按钮和锁定

<img alt="哈士奇外观，正面图" src="robot_husky_1.png" title="哈士奇-正面图" width="800"/>
哈士奇-正视图

<img alt="哈士奇外观，后视图" src="robot_husky_2.png" title="哈士奇-后视图" width="800"/>
哈士奇-后视图

## 状态面板

状态面板是位于机箱后部的 LED 指示灯，用于显示 Husky 的当前状态。下表介绍了这些指示灯。

|                  图标                    |                                            描述                                            |
|:--------------------------------------:|:----------------------------------------------------------------------------------------:|
| ![icon](robot_husky_3.png){width="60"} |                               电池状态四个 LED 段可大致指示电池的剩余相对寿命。                                |
| ![icon](robot_husky_4.png){width="60"} | 通信状态绿灯亮时，Husky 正在接收格式正确的运动命令流，并准备开始行驶。黄灯亮时，Husky 正在接收命令，但由于紧急停止或其他错误无法行驶。红灯亮时，串行通信当前已超时。 |
| ![icon](robot_husky_5.png){width="60"} |              常规错误状态当 Husky 因错误状态而无法行驶时，指示灯亮起红色。此类状态包括紧急停止、电池电量不足或未指定的软件错误。               |
| ![icon](robot_husky_6.png){width="60"} |                 紧急停止状态当 Husky 因激活紧急停止功能（无论是车载还是无线（如果可用））而无法行驶时，指示灯亮起红色。                  |
| ![icon](robot_husky_7.png){width="60"} |                               充电指示灯当 Husky 用户电源由外部供电时亮起红灯。                               |

状态面板顶部的银色按钮用于打开和关闭 Husky。<br/>
在“关闭”状态下，按下按钮将使 Husky 开启，按钮边缘的蓝色环将亮起。<br/>
在“开启”状态下，按下按钮将使 Husky 关闭，蓝色环将不再亮起。

## 方向

所有 Clearpath Robotics 地面机器人使用的参考系均基于 ISO 8855，如下图所示。
图中显示了 Husky 的前部。当命令平移速度为正（向前）时，车轮沿正 X 方向移动。
轴的方向与飞机中用于滚动、俯仰和偏航的方向不同，应确保正确解释数据。

![哈士奇，Orientation](robot_husky_8.png "哈士奇-Orientation"){thumbnail="true" width="800"}

从起点开始，Clearpath Robotics 建议车轮速度和平台速度之间的关系如下式：

## 系统

|       规格       |                    测量                    |
|:--------------:|:----------------------------------------:|
|     尺寸、长度      |                  990 毫米                  |
|     尺寸、宽度      |                  670 毫米                  |
|     尺寸、高度      |                  390 毫米                  |
|      履带宽度      |                  550 毫米                  |
|      轴距长度      |                  512 毫米                  |
|      离地间隙      |                  130 毫米                  |
|      大量的       |                  50 公斤                   |
|     最大有效载荷¹     |                  75 公斤                   |
|    全地形有效载荷²     |                  20 公斤                   |
|      最大速度      |                  1 米/秒                   |
|      爬升等级      |                   45°                    |
|     横坡/边坡      |                   30°                    |
|     最低工作温度     |                 -10 摄氏度                  |
|     最高工作温度     |               40 °C（无阳光直射）               |
|     平均操作时间     |                   3 小时                   |
|     待机工作时间     |                   8 小时                   |
|       电池       |           20 Ah @ 24 V，密封铅酸电池            |
|     电池充电器      |             短路、过流、过压和反向电压保护              |
|      充电时间      |                  10 小时                   |
| 用户影响力，2021年及之前 |        5 V、12 V、V 型电池，每个保险丝为 5 A         |
| 用户影响力，2022年及以后 |         <12V@7.5A>、24V@3A、VBAT@5A          |
|       沟通       |             RS-232，115200 波特             |
|     车轮编码器      |               78,000 刻/分钟                |
|      内部传感      |              电池状态、车轮里程、电机电流              |
|      环境的       |  IP44（基本 Husky）；IP30（带计算机）；IP55（带防风雨套件）  |

¹在相对平坦的地形上连续运行，并能进行大范围转弯。<br/>
²机器人在高位有效载荷的情况下爬升 30° 坡度，或在高摩擦条件下原地转弯。

![哈士奇，System Specifications](robot_husky_9.png "哈士奇-System Specifications"){thumbnail="true" width="800"}

## 车载计算机

实验室装备的Husky带有机载计算机，通过Husky的串行端口连接，该端口位于可从用户舱访问的用户电源面板中，如下图。

![哈士奇，serial port](robot_husky_10.png "哈士奇-serial port"){thumbnail="true" width="800"}

Husky的串口连接器为DE-9母头，适合直接连接到USB串行适配器或通过直通调制解调器电缆（不是零调制解调器电缆）连接到计算机串行端口。
如何将车载计算机连接到 Husky 取决于车载计算机是否有专用串行端口。Husky 随附 USB 串行适配器。

## 连接和使用

要使用控制器，必须与Husky配对并打开电源。实验室的控制器已与 Husky 配对。只需要启动Husky，即可自动配对。
要遥控 Husky，首先要松开运动停止装置。然后，参考下图，按下启用按钮（慢速或快速模式），并使用左拇指操纵杆驱动 Husky。

![PS4 控制器](controller_ps4.png "PS4 控制器"){thumbnail="true" width="800"}

PS4 控制器

![罗技 F710](controller_logitech.png "罗技 F710"){thumbnail="true" width="800"}

罗技 F710 控制器
>实际上，X是快速，B是慢速

## 停止按钮与锁定
>
>确保“停止”按钮随时可用。避免安装超出 Husky 后部的有效载荷，以免遮挡“停止”按钮。

运动停止功能允许机器人附近的人员停止其运动并防止其重新开始运动。
Husky 电机驱动器的电源由常开继电器启动，该继电器与停止开关串联闭合。
此运动停止系统旨在用于紧急情况。运动停止系统不应用作在正常运行期间控制机器人运动的手段。<br/>
处于停止模式时，状态面板停止灯将亮起红色，Husky 将不会行驶。
停止模式期间收到的命令不会缓冲；Husky 将始终按照收到的最新命令执行。<br/>
这意味着，如果在释放停止按钮之前停止命令，Husky 将不会移动。
如果继续执行命令，一旦释放停止按钮，Husky 将以指令的速度移动。<br/>
按下 Husky 后部（与状态面板相对）的红色停止执行器即可启用此“停止”功能，
如下图所示。旋转按下的执行器直至其返回到伸展位置即可重置运动停止功能。
重置停止功能无需第二次“启动”操作。停止执行器返回到伸展位置后，机器人可以立即开始再次移动。

![哈士奇，Stop button and Lockout](robot_husky_12.png "哈士奇-Stop button and Lockout"){thumbnail="true" width="800"}

锁定可防止 Husky 执行任何类型的动作。处于锁定模式时，机器人仍会通电，但电机不会驱动。

## 电池与充电

![哈士奇，power](robot_husky_11.png "哈士奇-power"){thumbnail="true" width="800"}

实验室Husky更新了电池，这点与官方文档不同，我们采用24V的锂电池。
>警告！如果你不了解直流电路，请严格按照以下内容进行日常维护，并遵守以下注意事项：
>
>* 请勿改动保险丝面板，除非检查和更换保险丝以及连接和断开电池插头。
>* 请勿在电池盖未安装到位的情况下操作 Husky。没有电池盖，电池将不受约束，并可能松动，损坏保险丝面板。
>* 仅使用专用的充电器为电池充电。
>* 请妥善保管处理电池。
>
### 更换电池

如果电池损耗严重，需要更换新电池，请严格按照以下参数定制锂电池：

## 日常使用及维护

要启动 Husky，请用力按下位于状态面板上方的电源按钮。按钮将亮起蓝光，状态面板灯将显示简短的测试模式。
COMM状态灯将变为红色，因为 PC 尚未与 Husky 通信。
如果按下“停止”按钮，状态STOP灯将为红色。如果未按下“停止”按钮，请按下它并确认灯STOP亮起。
让平台处于停止模式，直到它成功接收命令，COMM状态灯变为绿色或黄色表示成功接收命令。
车载计算机设置为启动时自动连接；启动后 60-90 秒，COMM状态灯将从红色变为绿色（或黄色，取决于停止模式状态）。
这表明 ROS 已在计算机上启动并已与 Husky 基座建立通信。
>COMM状态灯长时间为红色，请按以下方式重启车载计算机。(长按车载计算机电源按钮后释放)

如长时间不使用Husky，请保持所有设备(注意禾赛雷达的供电是否断开)处于断电状态，并定期检查电池电量，并及时充电。
